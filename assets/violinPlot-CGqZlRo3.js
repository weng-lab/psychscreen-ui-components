import{j as y}from"./jsx-runtime-CDt2p4po.js";import{r as $,R as Z}from"./index-GiUgBvb1.js";import{e as Jt,f as Kt,_ as se,i as mt,g as H,s as Zt,h as Ge,j as Pt,k as Qe,G as pt,L as Ue,l as en,d as tn,u as nn,a as Je,T as Ke,b as Ze,A as Pe}from"./useParentSize-1UGC14_K.js";import{I as rn}from"./index-CROobee-.js";var an=["tooltipOpen"];function on(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},de.apply(this,arguments)}function un(e){var t=$.useState(de({tooltipOpen:!1},e)),n=t[0],r=t[1],i=$.useCallback(function(o){return r(typeof o=="function"?function(u){u.tooltipOpen;var s=on(u,an);return de({},o(s),{tooltipOpen:!0})}:{tooltipOpen:!0,tooltipLeft:o.tooltipLeft,tooltipTop:o.tooltipTop,tooltipData:o.tooltipData})},[r]),a=$.useCallback(function(){return r({tooltipOpen:!1,tooltipLeft:void 0,tooltipTop:void 0,tooltipData:void 0})},[r]);return{tooltipOpen:n.tooltipOpen,tooltipLeft:n.tooltipLeft,tooltipTop:n.tooltipTop,tooltipData:n.tooltipData,updateTooltip:r,showTooltip:i,hideTooltip:a}}function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Me.apply(this,arguments)}function sn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ln(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,$e(e,t)}function $e(e,t){return $e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$e(e,t)}var et={top:0,right:0,bottom:0,left:0,width:0,height:0};function cn(e){var t;return t=function(n){ln(r,n);function r(a){var o;return o=n.call(this,a)||this,o.state={rect:void 0,parentRect:void 0},o.nodeRef=Z.createRef(),o.getRects=o.getRects.bind(sn(o)),o}var i=r.prototype;return i.componentDidMount=function(){var o,u=this;this.node=(o=this.nodeRef)!=null&&o.current?this.nodeRef.current:rn.findDOMNode(this),this.setState(function(){return u.getRects()})},i.getRects=function(){if(!this.node)return this.state;var o=this.node,u=o.parentNode,s=o.getBoundingClientRect?o.getBoundingClientRect():et,l=u!=null&&u.getBoundingClientRect?u.getBoundingClientRect():et;return{rect:s,parentRect:l}},i.render=function(){return Z.createElement(e,Me({nodeRef:this.nodeRef,getRects:this.getRects},this.state,this.props))},r}(Z.PureComponent),t.displayName="withBoundingRects("+(e.displayName||"")+")",t}var yt=$.createContext({isFlippedVertically:!1,isFlippedHorizontally:!1}),fn=yt.Provider;yt.Consumer;var hn=["children","getRects","left","offsetLeft","offsetTop","parentRect","rect","style","top","unstyled","nodeRef"];function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},me.apply(this,arguments)}function dn(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function vt(e){var t=e.children;e.getRects;var n=e.left,r=n===void 0?0:n,i=e.offsetLeft,a=i===void 0?10:i,o=e.offsetTop,u=o===void 0?10:o,s=e.parentRect,l=e.rect,c=e.style,f=c===void 0?Kt:c,h=e.top,d=h===void 0?0:h,m=e.unstyled,v=m===void 0?!1:m,_=e.nodeRef,M=dn(e,hn),x,T=!1,b=!1;if(l&&s){var k=r,q=d;if(s.width){var V=k+a+l.width-s.width,g=l.width-k-a;T=V>0&&V>g}else{var w=k+a+l.width-window.innerWidth,E=l.width-k-a;T=w>0&&w>E}if(s.height){var R=q+u+l.height-s.height,ke=l.height-q-u;b=R>0&&R>ke}else b=q+u+l.height>window.innerHeight;k=T?k-l.width-a:k+a,q=b?q-l.height-u:q+u,k=Math.round(k),q=Math.round(q),x="translate("+k+"px, "+q+"px)"}return Z.createElement(Jt,me({ref:_,style:me({left:0,top:0,transform:x},!v&&f)},M),Z.createElement(fn,{value:{isFlippedVertically:!b,isFlippedHorizontally:!T}},t))}vt.propTypes={nodeRef:se.oneOfType([se.string,se.func,se.object])};const mn=cn(vt);class tt extends Map{constructor(t,n=vn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(nt(this,t))}has(t){return super.has(nt(this,t))}set(t,n){return super.set(pn(this,t),n)}delete(t){return super.delete(yn(this,t))}}function nt({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function pn({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function yn({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function vn(e){return e!==null&&typeof e=="object"?e.valueOf():e}function gn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function _n(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function gt(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}const rt=Symbol("implicit");function _t(){var e=new tt,t=[],n=[],r=rt;function i(a){let o=e.get(a);if(o===void 0){if(r!==rt)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new tt;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return _t(t,n).unknown(r)},mt.apply(i,arguments),i}function wt(){var e=_t().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,u=!1,s=0,l=0,c=.5;delete e.unknown;function f(){var h=t().length,d=i<r,m=d?i:r,v=d?r:i;a=(v-m)/Math.max(1,h-s+l*2),u&&(a=Math.floor(a)),m+=(v-m-a*(h-s))*c,o=a*(1-s),u&&(m=Math.round(m),o=Math.round(o));var _=gt(h).map(function(M){return m+a*M});return n(d?_.reverse():_)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,u=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(u=!!h,f()):u},e.padding=function(h){return arguments.length?(s=Math.min(1,l=+h),f()):s},e.paddingInner=function(h){return arguments.length?(s=Math.min(1,h),f()):s},e.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},e.copy=function(){return wt(t(),[r,i]).round(u).paddingInner(s).paddingOuter(l).align(c)},mt.apply(f(),arguments)}var it=180/Math.PI,Ae={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bt(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*it,skewX:Math.atan(s)*it,scaleX:o,scaleY:u}}var le;function wn(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ae:bt(t.a,t.b,t.c,t.d,t.e,t.f)}function bn(e){return e==null||(le||(le=document.createElementNS("http://www.w3.org/2000/svg","g")),le.setAttribute("transform",e),!(e=le.transform.baseVal.consolidate()))?Ae:(e=e.matrix,bt(e.a,e.b,e.c,e.d,e.e,e.f))}function kt(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var v=d.push("translate(",null,t,null,n);m.push({i:v-4,x:H(l,f)},{i:v-2,x:H(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:H(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:H(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var v=d.push(i(d)+"scale(",null,",",null,")");m.push({i:v-4,x:H(l,f)},{i:v-2,x:H(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,v=h.length,_;++m<v;)f[(_=h[m]).i]=_.x(d);return f.join("")}}}var kn=kt(wn,"px, ","px)","deg)"),xn=kt(bn,", ",")",")"),Tn=Zt("domain","range","reverse","align","padding","round");function at(e){return Tn(wt(),e)}var qn={value:()=>{}};function xt(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ce(n)}function ce(e){this._=e}function Mn(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ce.prototype=xt.prototype={constructor:ce,on:function(e,t){var n=this._,r=Mn(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=$n(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=ot(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ot(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ce(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function $n(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ot(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=qn,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ce="http://www.w3.org/1999/xhtml";const ut={svg:"http://www.w3.org/2000/svg",xhtml:Ce,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _e(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ut.hasOwnProperty(t)?{space:ut[t],local:e}:e}function An(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ce&&t.documentElement.namespaceURI===Ce?t.createElement(e):t.createElementNS(n,e)}}function Cn(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Tt(e){var t=_e(e);return(t.local?Cn:An)(t)}function Sn(){}function Le(e){return e==null?Sn:function(){return this.querySelector(e)}}function En(e){typeof e!="function"&&(e=Le(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new C(r,this._parents)}function Rn(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function On(){return[]}function qt(e){return e==null?On:function(){return this.querySelectorAll(e)}}function Nn(e){return function(){return Rn(e.apply(this,arguments))}}function Ln(e){typeof e=="function"?e=Nn(e):e=qt(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new C(r,i)}function Mt(e){return function(){return this.matches(e)}}function $t(e){return function(t){return t.matches(e)}}var Dn=Array.prototype.find;function Vn(e){return function(){return Dn.call(this.children,e)}}function Fn(){return this.firstElementChild}function jn(e){return this.select(e==null?Fn:Vn(typeof e=="function"?e:$t(e)))}var Xn=Array.prototype.filter;function In(){return Array.from(this.children)}function Bn(e){return function(){return Xn.call(this.children,e)}}function zn(e){return this.selectAll(e==null?In:Bn(typeof e=="function"?e:$t(e)))}function Wn(e){typeof e!="function"&&(e=Mt(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new C(r,this._parents)}function At(e){return new Array(e.length)}function Yn(){return new C(this._enter||this._groups.map(At),this._parents)}function pe(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}pe.prototype={constructor:pe,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Hn(e){return function(){return e}}function Gn(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new pe(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function Qn(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new pe(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function Un(e){return e.__data__}function Jn(e,t){if(!arguments.length)return Array.from(this,Un);var n=t?Qn:Gn,r=this._parents,i=this._groups;typeof e!="function"&&(e=Hn(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=Kn(e.call(c,c&&c.__data__,l,r)),m=d.length,v=u[l]=new Array(m),_=o[l]=new Array(m),M=s[l]=new Array(h);n(c,f,v,_,M,d,t);for(var x=0,T=0,b,k;x<m;++x)if(b=v[x]){for(x>=T&&(T=x+1);!(k=_[T])&&++T<m;);b._next=k||null}}return o=new C(o,r),o._enter=u,o._exit=s,o}function Kn(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Zn(){return new C(this._exit||this._groups.map(At),this._parents)}function Pn(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function er(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),u=new Array(i),s=0;s<o;++s)for(var l=n[s],c=r[s],f=l.length,h=u[s]=new Array(f),d,m=0;m<f;++m)(d=l[m]||c[m])&&(h[m]=d);for(;s<i;++s)u[s]=n[s];return new C(u,this._parents)}function tr(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function nr(e){e||(e=rr);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new C(i,this._parents).order()}function rr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ir(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ar(){return Array.from(this)}function or(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function ur(){let e=0;for(const t of this)++e;return e}function sr(){return!this.node()}function lr(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function cr(e){return function(){this.removeAttribute(e)}}function fr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hr(e,t){return function(){this.setAttribute(e,t)}}function dr(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function mr(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function pr(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yr(e,t){var n=_e(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?fr:cr:typeof t=="function"?n.local?pr:mr:n.local?dr:hr)(n,t))}function Ct(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vr(e){return function(){this.style.removeProperty(e)}}function gr(e,t,n){return function(){this.style.setProperty(e,t,n)}}function _r(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function wr(e,t,n){return arguments.length>1?this.each((t==null?vr:typeof t=="function"?_r:gr)(e,t,n??"")):P(this.node(),e)}function P(e,t){return e.style.getPropertyValue(t)||Ct(e).getComputedStyle(e,null).getPropertyValue(t)}function br(e){return function(){delete this[e]}}function kr(e,t){return function(){this[e]=t}}function xr(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Tr(e,t){return arguments.length>1?this.each((t==null?br:typeof t=="function"?xr:kr)(e,t)):this.node()[e]}function St(e){return e.trim().split(/^|\s+/)}function De(e){return e.classList||new Et(e)}function Et(e){this._node=e,this._names=St(e.getAttribute("class")||"")}Et.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Rt(e,t){for(var n=De(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Ot(e,t){for(var n=De(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function qr(e){return function(){Rt(this,e)}}function Mr(e){return function(){Ot(this,e)}}function $r(e,t){return function(){(t.apply(this,arguments)?Rt:Ot)(this,e)}}function Ar(e,t){var n=St(e+"");if(arguments.length<2){for(var r=De(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?$r:t?qr:Mr)(n,t))}function Cr(){this.textContent=""}function Sr(e){return function(){this.textContent=e}}function Er(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Rr(e){return arguments.length?this.each(e==null?Cr:(typeof e=="function"?Er:Sr)(e)):this.node().textContent}function Or(){this.innerHTML=""}function Nr(e){return function(){this.innerHTML=e}}function Lr(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Dr(e){return arguments.length?this.each(e==null?Or:(typeof e=="function"?Lr:Nr)(e)):this.node().innerHTML}function Vr(){this.nextSibling&&this.parentNode.appendChild(this)}function Fr(){return this.each(Vr)}function jr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xr(){return this.each(jr)}function Ir(e){var t=typeof e=="function"?e:Tt(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Br(){return null}function zr(e,t){var n=typeof e=="function"?e:Tt(e),r=t==null?Br:typeof t=="function"?t:Le(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Wr(){var e=this.parentNode;e&&e.removeChild(this)}function Yr(){return this.each(Wr)}function Hr(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gr(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qr(e){return this.select(e?Gr:Hr)}function Ur(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Jr(e){return function(t){e.call(this,t,this.__data__)}}function Kr(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Zr(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function Pr(e,t,n){return function(){var r=this.__on,i,a=Jr(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function ei(e,t,n){var r=Kr(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?Pr:Zr,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function Nt(e,t,n){var r=Ct(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ti(e,t){return function(){return Nt(this,e,t)}}function ni(e,t){return function(){return Nt(this,e,t.apply(this,arguments))}}function ri(e,t){return this.each((typeof t=="function"?ni:ti)(e,t))}function*ii(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var ai=[null];function C(e,t){this._groups=e,this._parents=t}function ue(){return new C([[document.documentElement]],ai)}function oi(){return this}C.prototype=ue.prototype={constructor:C,select:En,selectAll:Ln,selectChild:jn,selectChildren:zn,filter:Wn,data:Jn,enter:Yn,exit:Zn,join:Pn,merge:er,selection:oi,order:tr,sort:nr,call:ir,nodes:ar,node:or,size:ur,empty:sr,each:lr,attr:yr,style:wr,property:Tr,classed:Ar,text:Rr,html:Dr,raise:Fr,lower:Xr,append:Ir,insert:zr,remove:Yr,clone:Qr,datum:Ur,on:ei,dispatch:ri,[Symbol.iterator]:ii};var ee=0,re=0,ne=0,Lt=1e3,ye,ie,ve=0,Q=0,we=0,oe=typeof performance=="object"&&performance.now?performance:Date,Dt=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ve(){return Q||(Dt(ui),Q=oe.now()+we)}function ui(){Q=0}function ge(){this._call=this._time=this._next=null}ge.prototype=Vt.prototype={constructor:ge,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ve():+n)+(t==null?0:+t),!this._next&&ie!==this&&(ie?ie._next=this:ye=this,ie=this),this._call=e,this._time=n,Se()},stop:function(){this._call&&(this._call=null,this._time=1/0,Se())}};function Vt(e,t,n){var r=new ge;return r.restart(e,t,n),r}function si(){Ve(),++ee;for(var e=ye,t;e;)(t=Q-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ee}function st(){Q=(ve=oe.now())+we,ee=re=0;try{si()}finally{ee=0,ci(),Q=0}}function li(){var e=oe.now(),t=e-ve;t>Lt&&(we-=t,ve=e)}function ci(){for(var e,t=ye,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ye=n);ie=e,Se(r)}function Se(e){if(!ee){re&&(re=clearTimeout(re));var t=e-Q;t>24?(e<1/0&&(re=setTimeout(st,e-oe.now()-we)),ne&&(ne=clearInterval(ne))):(ne||(ve=oe.now(),ne=setInterval(li,Lt)),ee=1,Dt(st))}}function lt(e,t,n){var r=new ge;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var fi=xt("start","end","cancel","interrupt"),hi=[],Ft=0,ct=1,Ee=2,fe=3,ft=4,Re=5,he=6;function be(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;di(e,n,{name:t,index:r,group:i,on:fi,tween:hi,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ft})}function Fe(e,t){var n=S(e,t);if(n.state>Ft)throw new Error("too late; already scheduled");return n}function D(e,t){var n=S(e,t);if(n.state>fe)throw new Error("too late; already running");return n}function S(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function di(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Vt(a,0,n.time);function a(l){n.state=ct,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==ct)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===fe)return lt(o);d.state===ft?(d.state=he,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=he,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(lt(function(){n.state===fe&&(n.state=ft,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=Ee,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ee){for(n.state=fe,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=Re,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===Re&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=he,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function mi(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Ee&&r.state<Re,r.state=he,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function pi(e){return this.each(function(){mi(this,e)})}function yi(e,t){var n,r;return function(){var i=D(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function vi(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=D(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function gi(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=S(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?yi:vi)(n,e,t))}function je(e,t,n){var r=e._id;return e.each(function(){var i=D(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return S(i,r).value[t]}}function jt(e,t){var n;return(typeof t=="number"?H:t instanceof Qe?Ge:(n=Qe(t))?(t=n,Ge):Pt)(e,t)}function _i(e){return function(){this.removeAttribute(e)}}function wi(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bi(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function ki(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function xi(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function Ti(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function qi(e,t){var n=_e(e),r=n==="transform"?xn:jt;return this.attrTween(e,typeof t=="function"?(n.local?Ti:xi)(n,r,je(this,"attr."+e,t)):t==null?(n.local?wi:_i)(n):(n.local?ki:bi)(n,r,t))}function Mi(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function $i(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ai(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&$i(e,a)),n}return i._value=t,i}function Ci(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Mi(e,a)),n}return i._value=t,i}function Si(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=_e(e);return this.tween(n,(r.local?Ai:Ci)(r,t))}function Ei(e,t){return function(){Fe(this,e).delay=+t.apply(this,arguments)}}function Ri(e,t){return t=+t,function(){Fe(this,e).delay=t}}function Oi(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ei:Ri)(t,e)):S(this.node(),t).delay}function Ni(e,t){return function(){D(this,e).duration=+t.apply(this,arguments)}}function Li(e,t){return t=+t,function(){D(this,e).duration=t}}function Di(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ni:Li)(t,e)):S(this.node(),t).duration}function Vi(e,t){if(typeof t!="function")throw new Error;return function(){D(this,e).ease=t}}function Fi(e){var t=this._id;return arguments.length?this.each(Vi(t,e)):S(this.node(),t).ease}function ji(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;D(this,e).ease=n}}function Xi(e){if(typeof e!="function")throw new Error;return this.each(ji(this._id,e))}function Ii(e){typeof e!="function"&&(e=Mt(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new j(r,this._parents,this._name,this._id)}function Bi(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new j(o,this._parents,this._name,this._id)}function zi(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Wi(e,t,n){var r,i,a=zi(t)?Fe:D;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function Yi(e,t){var n=this._id;return arguments.length<2?S(this.node(),n).on.on(e):this.each(Wi(n,e,t))}function Hi(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Gi(){return this.on("end.remove",Hi(this._id))}function Qi(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Le(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,be(l[h],t,n,h,l,S(c,n)));return new j(a,this._parents,t,n)}function Ui(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qt(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=S(c,n),v=0,_=h.length;v<_;++v)(d=h[v])&&be(d,t,n,v,h,m);a.push(h),o.push(c)}return new j(a,o,t,n)}var Ji=ue.prototype.constructor;function Ki(){return new Ji(this._groups,this._parents)}function Zi(e,t){var n,r,i;return function(){var a=P(this,e),o=(this.style.removeProperty(e),P(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function Xt(e){return function(){this.style.removeProperty(e)}}function Pi(e,t,n){var r,i=n+"",a;return function(){var o=P(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function ea(e,t,n){var r,i,a;return function(){var o=P(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),P(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function ta(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=D(this,e),l=s.on,c=s.value[a]==null?u||(u=Xt(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function na(e,t,n){var r=(e+="")=="transform"?kn:jt;return t==null?this.styleTween(e,Zi(e,r)).on("end.style."+e,Xt(e)):typeof t=="function"?this.styleTween(e,ea(e,r,je(this,"style."+e,t))).each(ta(this._id,e)):this.styleTween(e,Pi(e,r,t),n).on("end.style."+e,null)}function ra(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function ia(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&ra(e,o,n)),r}return a._value=t,a}function aa(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,ia(e,t,n??""))}function oa(e){return function(){this.textContent=e}}function ua(e){return function(){var t=e(this);this.textContent=t??""}}function sa(e){return this.tween("text",typeof e=="function"?ua(je(this,"text",e)):oa(e==null?"":e+""))}function la(e){return function(t){this.textContent=e.call(this,t)}}function ca(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&la(i)),t}return r._value=e,r}function fa(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ca(e))}function ha(){for(var e=this._name,t=this._id,n=It(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=S(s,t);be(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new j(r,this._parents,e,n)}function da(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=D(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var ma=0;function j(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function It(){return++ma}var F=ue.prototype;j.prototype={constructor:j,select:Qi,selectAll:Ui,selectChild:F.selectChild,selectChildren:F.selectChildren,filter:Ii,merge:Bi,selection:Ki,transition:ha,call:F.call,nodes:F.nodes,node:F.node,size:F.size,empty:F.empty,each:F.each,on:Yi,attr:qi,attrTween:Si,style:na,styleTween:aa,text:sa,textTween:fa,remove:Gi,tween:gi,delay:Oi,duration:Di,ease:Fi,easeVarying:Xi,end:da,[Symbol.iterator]:F[Symbol.iterator]};function pa(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ya={time:null,delay:0,duration:250,ease:pa};function va(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ga(e){var t,n;e instanceof j?(t=e._id,e=e._name):(t=It(),(n=ya).time=Ve(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&be(s,e,t,l,o,n||va(s,t));return new j(r,this._parents,e,t)}ue.prototype.interrupt=pi;ue.prototype.transition=ga;const Oe=Math.PI,Ne=2*Oe,G=1e-6,_a=Ne-G;function Bt(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function wa(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Bt;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class ba{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Bt:wa(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,s=r-t,l=i-n,c=o-t,f=u-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>G)if(!(Math.abs(f*s-l*c)>G)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-o,m=i-u,v=s*s+l*l,_=d*d+m*m,M=Math.sqrt(v),x=Math.sqrt(h),T=a*Math.tan((Oe-Math.acos((v+h-_)/(2*M*x)))/2),b=T/x,k=T/M;Math.abs(b-1)>G&&this._append`L${t+b*c},${n+b*f}`,this._append`A${a},${a},0,0,${+(f*d>c*m)},${this._x1=t+k*s},${this._y1=n+k*l}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),s=r*Math.sin(i),l=t+u,c=n+s,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>G||Math.abs(this._y1-c)>G)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%Ne+Ne),h>_a?this._append`A${r},${r},0,1,${f},${t-u},${n-s}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>G&&this._append`A${r},${r},0,${+(h>=Oe)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function K(e){return function(){return e}}function ka(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new ba(t)}function xa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zt(e){this._context=e}zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ta(e){return new zt(e)}function qa(e){return e[0]}function Ma(e){return e[1]}function $a(e,t){var n=K(!0),r=null,i=Ta,a=null,o=ka(u);e=typeof e=="function"?e:e===void 0?qa:K(e),t=typeof t=="function"?t:t===void 0?Ma:K(t);function u(s){var l,c=(s=xa(s)).length,f,h=!1,d;for(r==null&&(a=i(d=o())),l=0;l<=c;++l)!(l<c&&n(f=s[l],l,s))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,l,s),+t(f,l,s));if(d)return a=null,d+""||null}return u.x=function(s){return arguments.length?(e=typeof s=="function"?s:K(+s),u):e},u.y=function(s){return arguments.length?(t=typeof s=="function"?s:K(+s),u):t},u.defined=function(s){return arguments.length?(n=typeof s=="function"?s:K(!!s),u):n},u.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),u):i},u.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),u):r},u}function ht(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Wt(e){this._context=e}Wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ht(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ht(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Aa(e){return new Wt(e)}function ae(e,t,n){this.k=e,this.x=t,this.y=n}ae.prototype={constructor:ae,scale:function(e){return e===1?this:new ae(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ae(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ae.prototype;const dt=(e,t,n)=>{const r=document.createElement("g");r.style.position="absolute",r.style.visibility="hidden",r.style.fontSize=`${t}px`,r.style.fontFamily=n,r.style.whiteSpace="nowrap",r.textContent=e,document.body.appendChild(r);const i=r.getBoundingClientRect().width;return document.body.removeChild(r),i},Ca=(e,t)=>{e.sort((d,m)=>d-m);const n=d=>{const m=Math.floor(d.length/2);return d.length%2!==0?d[m]:(d[m-1]+d[m])/2},r=d=>{const m=Math.floor(d.length/2),v=d.slice(0,m),_=d.slice(d.length%2===0?m:m+1);return{firstQuartile:n(v),thirdQuartile:n(_)}},{firstQuartile:i,thirdQuartile:a}=r(e),o=n(e),u=a-i,s=i-1.5*u,l=a+1.5*u,c=t==="none"?[]:t==="top"?e.filter(d=>d>l):t==="bottom"?e.filter(d=>d<s):e.filter(d=>d<s||d>l),f=e[0],h=e[e.length-1];return{min:f,max:h,firstQuartile:i,thirdQuartile:a,median:o,outliers:c}};function Sa(e,t){return n=>t.map(r=>({value:r,count:_n(n,i=>e(r-i))||0}))}function Ea(e){const t=1/(e*Math.sqrt(2*Math.PI));return n=>t*Math.exp(-.5*Math.pow(n/e,2))}function Ra(e){const t=e.length;if(t===0)return 0;const n=e.reduce((o,u)=>o+u,0)/t,r=e.reduce((o,u)=>o+Math.pow(u-n,2),0)/e.length;return 3.5*Math.sqrt(r)/Math.pow(t,1/3)}function Oa(e){const t=e.length;if(t===0)return 0;const n=e.reduce((c,f)=>c+f,0)/t,r=e.reduce((c,f)=>c+Math.pow(f-n,2),0)/t,i=Math.sqrt(r),a=e.slice().sort((c,f)=>c-f),o=a[Math.floor((t-1)*.25)],s=a[Math.floor((t-1)*.75)]-o,l=.9*Math.min(i,s/1.34)*Math.pow(t,-1/5);return Math.max(l,1e-10)}function Na(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;const n=Math.sin(t)*1e4;return n-Math.floor(n)}const Yt=({crossProps:e,left:t,top:n,median:r,firstQuartile:i,thirdQuartile:a,valueScale:o,medianWidth:u,tooltipData:s,handleMouseMove:l,handleCrossClick:c,disableViolinPlot:f,tooltip:h,horizontal:d})=>y.jsxs(pt,{left:t,top:n,children:[y.jsx(Ue,{from:{x:d?o(a):0,y:d?0:o(a)},to:{x:d?o(i):0,y:d?0:o(i)},stroke:(e==null?void 0:e.color)??"#000000",strokeWidth:s===h&&f?((e==null?void 0:e.stroke)??1)+1:(e==null?void 0:e.stroke)??1,onMouseMove:f?m=>l(m,h):void 0,onClick:c}),y.jsx(Ue,{from:{x:d?o(r):-u/2,y:d?-u/2:o(r)},to:{x:d?o(r):u/2,y:d?u/2:o(r)},stroke:(e==null?void 0:e.medianColor)??(e==null?void 0:e.color)??"#000000",strokeWidth:s===h&&f?((e==null?void 0:e.stroke)??1)+1:(e==null?void 0:e.stroke)??1,onMouseMove:f?m=>l(m,h):void 0,onClick:c})]});Yt.__docgenInfo={description:"",methods:[],displayName:"CrossPlot",props:{crossProps:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    color?: string;
    stroke?: number;
    outliers?: Outliers;
    medianColor?: string;
    medianWidth?: number;
}`,signature:{properties:[{key:"color",value:{name:"string",required:!1}},{key:"stroke",value:{name:"number",required:!1}},{key:"outliers",value:{name:"union",raw:'"all" | "top" | "bottom" | "none"',elements:[{name:"literal",value:'"all"'},{name:"literal",value:'"top"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"none"'}],required:!1}},{key:"medianColor",value:{name:"string",required:!1}},{key:"medianWidth",value:{name:"number",required:!1}}]}},description:""},left:{required:!0,tsType:{name:"number"},description:""},top:{required:!0,tsType:{name:"number"},description:""},median:{required:!0,tsType:{name:"number"},description:""},firstQuartile:{required:!0,tsType:{name:"number"},description:""},thirdQuartile:{required:!0,tsType:{name:"number"},description:""},valueScale:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: number) => number",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"number"}}},description:""},medianWidth:{required:!0,tsType:{name:"number"},description:""},tooltipData:{required:!0,tsType:{name:"TooltipData",elements:[{name:"T"}],raw:"TooltipData<T>"},description:""},handleMouseMove:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: React.MouseEvent<SVGPathElement>, data: TooltipData<T>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<SVGPathElement>",elements:[{name:"SVGPathElement"}]},name:"event"},{type:{name:"TooltipData",elements:[{name:"T"}],raw:"TooltipData<T>"},name:"data"}],return:{name:"void"}}},description:""},handleCrossClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},disableViolinPlot:{required:!0,tsType:{name:"boolean"},description:""},tooltip:{required:!0,tsType:{name:"TooltipData",elements:[{name:"T"}],raw:"TooltipData<T>"},description:""},horizontal:{required:!0,tsType:{name:"boolean"},description:""}}};const Ht=({left:e,top:t,data:n,open:r,pointTooltipBody:i})=>!r||!n?null:y.jsx(mn,{left:e+10,top:t,children:i&&n.point?i(n.point):Object.entries(n).map(([a,o])=>{const u=a.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/^./,s=>s.toUpperCase());return a==="outlier"?y.jsx("div",{children:y.jsx("strong",{children:u})},a):y.jsxs("div",{children:[y.jsxs("strong",{children:[u,": "]}),typeof o=="string"?o.length>45?`${o.replace(/_/g," ").slice(0,45)}...`:o.replace(/_/g," "):String(o)]},a)})});Ht.__docgenInfo={description:"",methods:[],displayName:"ViolinTooltip",props:{left:{required:!0,tsType:{name:"number"},description:""},top:{required:!0,tsType:{name:"number"},description:""},data:{required:!0,tsType:{name:"TooltipData",elements:[{name:"T"}],raw:"TooltipData<T>"},description:""},open:{required:!0,tsType:{name:"boolean"},description:""},pointTooltipBody:{required:!1,tsType:{name:"signature",type:"function",raw:"(point: ViolinPoint<T>) => JSX.Element",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
    value: number;
    outlier?: boolean;
    color?: string;
    radius?: number;
    opacity?: number;
    metadata?: T;
}`,signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"outlier",value:{name:"boolean",required:!1}},{key:"color",value:{name:"string",required:!1}},{key:"radius",value:{name:"number",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"metadata",value:{name:"T",required:!1}}]}},name:"point"}],return:{name:"JSX.Element"}}},description:""}}};const Gt=({distribution:e,distIndex:t,violinProps:n,crossProps:r,valueScale:i,labelScale:a,offset:o,labels:u,disableCrossPlot:s,disableViolinPlot:l,horizontal:c,pointTooltipBody:f,onViolinClicked:h,onPointClicked:d})=>{const{tooltipData:m,tooltipLeft:v,tooltipTop:_,tooltipOpen:M,showTooltip:x,hideTooltip:T}=un(),b=e.data.flatMap(p=>p.value),{min:k,max:q,firstQuartile:V,thirdQuartile:g,median:w,outliers:E}=Ca(b,(r==null?void 0:r.outliers)??"all"),R=e.data.filter(p=>E.includes(p.value)).map(p=>({...p,outlier:!0})),ke=e.data.filter(p=>!E.includes(p.value)),Xe=$.useMemo(()=>{const p=(q-k)/Math.max(100,b.length),N=gt(k,q,p),L=typeof(n==null?void 0:n.bandwidth)=="number"?n.bandwidth:typeof(n==null?void 0:n.bandwidth)=="function"?n.bandwidth(b):(n==null?void 0:n.bandwidth)==="scott"?Ra(b):Oa(b);return[...Sa(Ea(L),N)(b)].sort((B,A)=>B.value-A.value)},[b,q,k,n]),xe=Math.min(a.bandwidth(),50),Qt=(r==null?void 0:r.medianWidth)??xe*.25,Te=$.useMemo(()=>({label:e.label,sampleSize:e.data.length,median:w.toFixed(2),firstQuartile:V.toFixed(2),thirdQuartile:g.toFixed(2)}),[e.label,e.data.length,w,V,g]),te=$.useCallback((p,N,L)=>{x({tooltipData:L&&f?{point:L}:N,tooltipLeft:p.pageX,tooltipTop:p.pageY})},[f,x]),Ie=()=>{!h||!m||m&&h(e)},qe=p=>{!d||!m||m&&d(p)},O=c?(a(u[t])??0)+xe/2:(a(u[t])??0)+o+a.bandwidth()/2,Be=en().domain([0,gn(Xe,p=>Math.abs(p.count))||1]).range([0,xe/2]),ze=Xe.filter(p=>p&&p.count!=null&&p.value!=null);let U=[...ze.map(p=>({x:O+Be(p.count),y:i(p.value)})),...ze.slice().reverse().map(p=>({x:O-Be(p.count),y:i(p.value)}))];if(U.length>2){const p=U.slice(1);p.push(U[0]),p.push(U[1]),U=p}const We=$a().x(p=>c?p.y:p.x).y(p=>c?p.x:p.y).curve(Aa)(U)??null;return y.jsxs(Z.Fragment,{children:[y.jsxs("g",{onMouseLeave:T,transform:c?`translate(${o}, 0)`:void 0,children:[e.data.length>=((n==null?void 0:n.pointDisplayThreshold)??3)&&!l&&We&&y.jsx(y.Fragment,{children:y.jsx("path",{d:We,fill:e.violinColor??"none",fillOpacity:e.opacity??.3,stroke:e.violinColor??"black",strokeOpacity:e.opacity??1,strokeWidth:m===Te?((n==null?void 0:n.stroke)??1)+1:(n==null?void 0:n.stroke)??1,pointerEvents:"all",onMouseMove:p=>te(p,Te),onClick:Ie})}),e.data.length>=((n==null?void 0:n.pointDisplayThreshold)??3)&&!s&&y.jsx(Yt,{crossProps:r,left:c?0:O,top:c?O:0,median:w,firstQuartile:V,thirdQuartile:g,valueScale:i,medianWidth:Qt,tooltipData:m??{},handleMouseMove:te,handleCrossClick:Ie,disableViolinPlot:l,tooltip:Te,horizontal:c}),R.map((p,N)=>{const L=i(p.value),J=i(p.value),I=c?J:O,B=c?O:L,A={outlier:!0,label:e.label,value:p.value.toFixed(2)},X=f?(m==null?void 0:m.point)===p:(m==null?void 0:m.label)===A.label&&(m==null?void 0:m.value)===A.value,z=p.radius??4;return y.jsx("circle",{cx:I,cy:B,r:X?z+1:z,stroke:X?"#000000":"none",fill:p.color??e.violinColor??"#000000",opacity:p.opacity??e.opacity??1,pointerEvents:"all",onMouseMove:W=>te(W,A,p),onClick:()=>qe(p)},N)}),e.data.length>=((n==null?void 0:n.pointDisplayThreshold)??3)&&(n==null?void 0:n.showAllPoints)&&ke.map((p,N)=>{const L=i(p.value),J=i(p.value),I=(n==null?void 0:n.jitter)??0,B=`${e.label}-${p}-${N}`,A=I>0?(Na(B)-.5)*2*I:0,X=c?J:O+A,z=c?O+A:L,W={label:e.label,value:p.value.toFixed(2)},Ye=f?(m==null?void 0:m.point)===p:(m==null?void 0:m.label)===W.label&&(m==null?void 0:m.value)===W.value,He=p.radius??2,Y=Ye?He+1:He;return y.jsx("path",{d:`M ${X},${z} m -${Y},0 a ${Y},${Y} 0 1,0 ${2*Y},0 a ${Y},${Y} 0 1,0 -${2*Y},0`,stroke:Ye?"black":"none",fill:p.color??e.violinColor??"black",opacity:p.opacity??e.opacity??1,pointerEvents:"all",onMouseMove:Ut=>te(Ut,W,p),onClick:()=>qe(p)},`${e.label??t}-point-${N}`)}),e.data.length<((n==null?void 0:n.pointDisplayThreshold)??3)&&e.data.map((p,N)=>{const L=i(p.value),J=i(p.value),I=c?J:O,B=c?O:L,A=p.radius??2,X={label:e.label,value:p.value.toFixed(2)},z=f?(m==null?void 0:m.point)===p:(m==null?void 0:m.label)===X.label&&(m==null?void 0:m.value)===X.value;return y.jsx("circle",{cx:I,cy:B,r:z?A+1:A,stroke:z?"black":"none",fill:p.color??e.violinColor??"black",opacity:p.opacity??e.opacity??1,pointerEvents:"all",onMouseMove:W=>te(W,X,p),onClick:()=>qe(p)},N)})]},e.label??`group-${t}`),M&&m&&y.jsx(tn,{children:y.jsx(Ht,{left:v??0,top:_??0,data:m,open:M,pointTooltipBody:f},`${v}-${_}`)})]},e.label??`group-${t}`)};Gt.__docgenInfo={description:"",methods:[],displayName:"SingleViolin",props:{distribution:{required:!0,tsType:{name:"signature",type:"object",raw:`{
    data: ViolinPoint<T>[];
    label?: string;
    violinColor?: string;
    opacity?: number;
}`,signature:{properties:[{key:"data",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    value: number;
    outlier?: boolean;
    color?: string;
    radius?: number;
    opacity?: number;
    metadata?: T;
}`,signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"outlier",value:{name:"boolean",required:!1}},{key:"color",value:{name:"string",required:!1}},{key:"radius",value:{name:"number",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"metadata",value:{name:"T",required:!1}}]}}],raw:"ViolinPoint<T>[]",required:!0}},{key:"label",value:{name:"string",required:!1}},{key:"violinColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}}]}},description:""},distIndex:{required:!0,tsType:{name:"number"},description:""},violinProps:{required:!0,tsType:{name:"union",raw:"ViolinProps | undefined",elements:[{name:"signature",type:"object",raw:`{
    bandwidth?: number | "scott" | "silverman" | ((data: number[]) => number);
    stroke?: number;
    pointDisplayThreshold?: number;
    showAllPoints?: boolean;
    jitter?: number;
}`,signature:{properties:[{key:"bandwidth",value:{name:"union",raw:'number | "scott" | "silverman" | ((data: number[]) => number)',elements:[{name:"number"},{name:"literal",value:'"scott"'},{name:"literal",value:'"silverman"'},{name:"unknown"}],required:!1}},{key:"stroke",value:{name:"number",required:!1}},{key:"pointDisplayThreshold",value:{name:"number",required:!1}},{key:"showAllPoints",value:{name:"boolean",required:!1}},{key:"jitter",value:{name:"number",required:!1}}]}},{name:"undefined"}]},description:""},crossProps:{required:!0,tsType:{name:"union",raw:"CrossProps | undefined",elements:[{name:"signature",type:"object",raw:`{
    color?: string;
    stroke?: number;
    outliers?: Outliers;
    medianColor?: string;
    medianWidth?: number;
}`,signature:{properties:[{key:"color",value:{name:"string",required:!1}},{key:"stroke",value:{name:"number",required:!1}},{key:"outliers",value:{name:"union",raw:'"all" | "top" | "bottom" | "none"',elements:[{name:"literal",value:'"all"'},{name:"literal",value:'"top"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"none"'}],required:!1}},{key:"medianColor",value:{name:"string",required:!1}},{key:"medianWidth",value:{name:"number",required:!1}}]}},{name:"undefined"}]},description:""},valueScale:{required:!0,tsType:{name:"ScaleLinear",elements:[{name:"number"},{name:"number"},{name:"never"}],raw:"ScaleLinear<number, number, never>"},description:""},labelScale:{required:!0,tsType:{name:"ScaleBand",elements:[{name:"string"}],raw:"ScaleBand<string>"},description:""},offset:{required:!0,tsType:{name:"number"},description:""},labels:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},disableViolinPlot:{required:!0,tsType:{name:"boolean"},description:""},disableCrossPlot:{required:!0,tsType:{name:"boolean"},description:""},horizontal:{required:!0,tsType:{name:"boolean"},description:""},pointTooltipBody:{required:!1,tsType:{name:"signature",type:"function",raw:"(point: ViolinPoint<T>) => JSX.Element",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
    value: number;
    outlier?: boolean;
    color?: string;
    radius?: number;
    opacity?: number;
    metadata?: T;
}`,signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"outlier",value:{name:"boolean",required:!1}},{key:"color",value:{name:"string",required:!1}},{key:"radius",value:{name:"number",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"metadata",value:{name:"T",required:!1}}]}},name:"point"}],return:{name:"JSX.Element"}}},description:""},onViolinClicked:{required:!1,tsType:{name:"signature",type:"function",raw:"(distribution: Distribution<T>) => void | undefined",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
    data: ViolinPoint<T>[];
    label?: string;
    violinColor?: string;
    opacity?: number;
}`,signature:{properties:[{key:"data",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    value: number;
    outlier?: boolean;
    color?: string;
    radius?: number;
    opacity?: number;
    metadata?: T;
}`,signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"outlier",value:{name:"boolean",required:!1}},{key:"color",value:{name:"string",required:!1}},{key:"radius",value:{name:"number",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"metadata",value:{name:"T",required:!1}}]}}],raw:"ViolinPoint<T>[]",required:!0}},{key:"label",value:{name:"string",required:!1}},{key:"violinColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}}]}},name:"distribution"}],return:{name:"union",raw:"void | undefined",elements:[{name:"void"},{name:"undefined"}]}}},description:""},onPointClicked:{required:!1,tsType:{name:"signature",type:"function",raw:"(point: ViolinPoint<T>) => void | undefined",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
    value: number;
    outlier?: boolean;
    color?: string;
    radius?: number;
    opacity?: number;
    metadata?: T;
}`,signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"outlier",value:{name:"boolean",required:!1}},{key:"color",value:{name:"string",required:!1}},{key:"radius",value:{name:"number",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"metadata",value:{name:"T",required:!1}}]}},name:"point"}],return:{name:"union",raw:"void | undefined",elements:[{name:"void"},{name:"undefined"}]}}},description:""}}};const La=e=>{const{parentRef:t,width:n,height:r}=nn(),i=$.useMemo(()=>e.distributions.map((g,w)=>g.label??`Group ${w+1}`),[e.distributions]),a=e.labelOrientation??"horizontal",o=15,u=e.horizontal?a==="vertical"?o:Math.max(...i.map(g=>dt(g,o,"Arial")))/(a!=="horizontal"?1.25:1):a==="horizontal"?o:Math.max(...i.map(g=>dt(g,o,"Arial")))/(a!=="vertical"?1.25:1),s=40,l=e.horizontal?a!=="vertical"?u/1.75:u:s,c=n-2*l,f=r-u-2*l,h=n-2.5*l,d=r-130,m=e.distributions.flatMap(g=>g.data.flatMap(w=>w.value)),v=Math.min(...m),_=Math.max(...m),M=$.useMemo(()=>at({range:[0,c],round:!0,domain:i,padding:.4}),[c,i]),x=$.useMemo(()=>{const g=.07*(_-v);return Je({range:[f,0],round:!0,domain:[v-g,_+g]})},[f,v,_]),T=$.useMemo(()=>{const g=.07*(_-v);return Je({range:[0,h],round:!0,domain:[v-g,_+g]})},[h,v,_]),b=$.useMemo(()=>at({range:[0,d],round:!0,domain:i,padding:.4}),[d,i]),k=e.horizontal?T:x,q=e.horizontal?b:M,V=e.horizontal?y.jsx(Ke,{textAnchor:"middle",verticalAnchor:"end",fontSize:o,y:d+s+20,x:h/2+l,children:e.axisLabel}):y.jsx(Ke,{textAnchor:"middle",verticalAnchor:"end",angle:-90,fontSize:o,y:f/2,x:-10,children:e.axisLabel});return y.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},ref:t,children:y.jsx("svg",{width:n,height:r,ref:e.svgRef??void 0,children:y.jsxs(pt,{top:s,left:l,children:[e.horizontal?y.jsxs(y.Fragment,{children:[y.jsx(Ze,{scale:T,top:d,left:l,stroke:"black",tickStroke:"black",tickLabelProps:()=>({fill:"black",fontSize:o,textAnchor:"end",dy:"0.33em"})},"axisLeft"),V,y.jsx(Pe,{left:l,scale:b,stroke:"black",tickStroke:"black",tickValues:i,tickLabelProps:()=>({fill:"black",fontSize:o}),tickComponent:({x:g,y:w,formattedValue:E,...R})=>a!=="horizontal"?y.jsx("text",{...R,x:g,y:w,dx:a==="vertical"?0:"-0.25em",dy:a==="vertical"?"0.50em":a==="leftDiagonal"?"-0.25em":"0.25em",transform:a==="vertical"?`rotate(90, ${g}, ${w})`:a==="leftDiagonal"?`rotate(-45, ${g}, ${w})`:`rotate(45, ${g}, ${w})`,textAnchor:a==="vertical"?"middle":"end",dominantBaseline:"middle",children:E}):y.jsx("text",{...R,x:g,y:w,textAnchor:"end",dominantBaseline:"middle",dx:"-0.50em",children:E})},"axisBottom")]}):y.jsxs(y.Fragment,{children:[y.jsx(Pe,{left:l,scale:x,stroke:"black",tickStroke:"black",tickLabelProps:()=>({fill:"black",fontSize:o,textAnchor:"end",dy:"0.33em"})},"axisLeft"),V,y.jsx(Ze,{left:l,top:f,scale:M,stroke:"black",tickStroke:"black",tickValues:i,tickLabelProps:()=>({fill:"black",fontSize:o,textAnchor:a==="vertical"||a==="leftDiagonal"?"end":a==="rightDiagonal"?"start":"middle"}),tickComponent:({x:g,y:w,formattedValue:E,...R})=>a!=="horizontal"?y.jsx("text",{...R,x:g,y:w,transform:a==="vertical"?`rotate(-90, ${g}, ${w})`:a==="leftDiagonal"?`rotate(-45, ${g}, ${w})`:`rotate(45, ${g}, ${w})`,textAnchor:a==="vertical"||a==="leftDiagonal"?"end":a==="rightDiagonal"?"start":"middle",children:E}):y.jsx("text",{...R,x:g,y:w,textAnchor:"middle",children:E})},"axisBottom")]}),e.distributions.map((g,w)=>y.jsx(Gt,{distribution:g,distIndex:w,violinProps:e.violinProps,crossProps:e.crossProps,valueScale:k,labelScale:q,offset:l,labels:i,disableCrossPlot:e.disableCrossPlot??!1,disableViolinPlot:e.disableViolinPlot??!1,horizontal:e.horizontal??!1,pointTooltipBody:e.pointTooltipBody,onViolinClicked:e.onViolinClicked,onPointClicked:e.onPointClicked},w))]})})})};La.__docgenInfo={description:"",methods:[],displayName:"ViolinPlot",props:{distributions:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    data: ViolinPoint<T>[];
    label?: string;
    violinColor?: string;
    opacity?: number;
}`,signature:{properties:[{key:"data",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    value: number;
    outlier?: boolean;
    color?: string;
    radius?: number;
    opacity?: number;
    metadata?: T;
}`,signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"outlier",value:{name:"boolean",required:!1}},{key:"color",value:{name:"string",required:!1}},{key:"radius",value:{name:"number",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"metadata",value:{name:"T",required:!1}}]}}],raw:"ViolinPoint<T>[]",required:!0}},{key:"label",value:{name:"string",required:!1}},{key:"violinColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}}]}}],raw:"Distribution<T>[]"},description:""},loading:{required:!0,tsType:{name:"boolean"},description:""},svgRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<SVGSVGElement>",elements:[{name:"SVGSVGElement"}]},description:""},axisLabel:{required:!1,tsType:{name:"string"},description:""},disableCrossPlot:{required:!1,tsType:{name:"boolean"},description:""},disableViolinPlot:{required:!1,tsType:{name:"boolean"},description:""},crossProps:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    color?: string;
    stroke?: number;
    outliers?: Outliers;
    medianColor?: string;
    medianWidth?: number;
}`,signature:{properties:[{key:"color",value:{name:"string",required:!1}},{key:"stroke",value:{name:"number",required:!1}},{key:"outliers",value:{name:"union",raw:'"all" | "top" | "bottom" | "none"',elements:[{name:"literal",value:'"all"'},{name:"literal",value:'"top"'},{name:"literal",value:'"bottom"'},{name:"literal",value:'"none"'}],required:!1}},{key:"medianColor",value:{name:"string",required:!1}},{key:"medianWidth",value:{name:"number",required:!1}}]}},description:""},violinProps:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    bandwidth?: number | "scott" | "silverman" | ((data: number[]) => number);
    stroke?: number;
    pointDisplayThreshold?: number;
    showAllPoints?: boolean;
    jitter?: number;
}`,signature:{properties:[{key:"bandwidth",value:{name:"union",raw:'number | "scott" | "silverman" | ((data: number[]) => number)',elements:[{name:"number"},{name:"literal",value:'"scott"'},{name:"literal",value:'"silverman"'},{name:"unknown"}],required:!1}},{key:"stroke",value:{name:"number",required:!1}},{key:"pointDisplayThreshold",value:{name:"number",required:!1}},{key:"showAllPoints",value:{name:"boolean",required:!1}},{key:"jitter",value:{name:"number",required:!1}}]}},description:""},horizontal:{required:!1,tsType:{name:"boolean"},description:""},labelOrientation:{required:!1,tsType:{name:"union",raw:'"horizontal" | "vertical" | "leftDiagonal" | "rightDiagonal"',elements:[{name:"literal",value:'"horizontal"'},{name:"literal",value:'"vertical"'},{name:"literal",value:'"leftDiagonal"'},{name:"literal",value:'"rightDiagonal"'}]},description:""},onViolinClicked:{required:!1,tsType:{name:"signature",type:"function",raw:"(distribution: Distribution<T>) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
    data: ViolinPoint<T>[];
    label?: string;
    violinColor?: string;
    opacity?: number;
}`,signature:{properties:[{key:"data",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    value: number;
    outlier?: boolean;
    color?: string;
    radius?: number;
    opacity?: number;
    metadata?: T;
}`,signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"outlier",value:{name:"boolean",required:!1}},{key:"color",value:{name:"string",required:!1}},{key:"radius",value:{name:"number",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"metadata",value:{name:"T",required:!1}}]}}],raw:"ViolinPoint<T>[]",required:!0}},{key:"label",value:{name:"string",required:!1}},{key:"violinColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}}]}},name:"distribution"}],return:{name:"void"}}},description:""},onPointClicked:{required:!1,tsType:{name:"signature",type:"function",raw:"(point: ViolinPoint<T>) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
    value: number;
    outlier?: boolean;
    color?: string;
    radius?: number;
    opacity?: number;
    metadata?: T;
}`,signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"outlier",value:{name:"boolean",required:!1}},{key:"color",value:{name:"string",required:!1}},{key:"radius",value:{name:"number",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"metadata",value:{name:"T",required:!1}}]}},name:"point"}],return:{name:"void"}}},description:""},pointTooltipBody:{required:!1,tsType:{name:"signature",type:"function",raw:"(point: ViolinPoint<T>) => JSX.Element",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
    value: number;
    outlier?: boolean;
    color?: string;
    radius?: number;
    opacity?: number;
    metadata?: T;
}`,signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"outlier",value:{name:"boolean",required:!1}},{key:"color",value:{name:"string",required:!1}},{key:"radius",value:{name:"number",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"metadata",value:{name:"T",required:!1}}]}},name:"point"}],return:{name:"JSX.Element"}}},description:""}}};export{La as V};
